<!DOCTYPE html>
<html>
<head>

<title>Live Match</title>

<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

<style>

body {
    background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    font-family: Segoe UI, sans-serif;
    color: white;
}

/* SCORE HEADER */
.score-box {
    background: #111;
    padding: 15px;
    border-radius: 18px;
    box-shadow: 0px 4px 15px rgba(0,0,0,0.6);
    text-align: center;
}

/* SCORE ANIMATION */
.animate {
    animation: pop 0.2s ease-in-out;
}

@keyframes pop {
    0% {transform: scale(1);}
    50% {transform: scale(1.12);}
    100% {transform: scale(1);}
}

/* TEAM CARDS */
.team-card {
    border-radius: 20px;
    box-shadow: 0px 5px 20px rgba(0,0,0,0.5);
    padding: 12px;
}

.teamA {
    background: linear-gradient(135deg,#2193b0,#6dd5ed);
}

.teamB {
    background: linear-gradient(135deg,#ff416c,#ff4b2b);
}

/* BUTTONS */
.action-btn {
    font-weight: bold;
    border-radius: 12px;
    padding: 10px;
}

/* WINNER BOX */
.win-box {
    background: #0f5132;
    padding: 20px;
    border-radius: 15px;
    text-align: center;
}

/* BOTTOM BAR */
.bottom-nav {
    position: fixed;
    bottom: 0;
    width: 100%;
    background: #111;
    display: flex;
    justify-content: space-around;
    padding: 8px;
}

.bottom-nav a {
    color: white;
    text-decoration: none;
    font-size: 13px;
    text-align: center;
}

.bottom-nav i {
    font-size: 18px;
}

</style>

</head>

<body>

<div class="container mt-2 mb-5">

<!-- SCORE HEADER -->

<div class="score-box animate mb-3">

<h3>
{{session.teamA}} {{session.scoreA}}
<span class="text-warning"> - </span>
{{session.scoreB}} {{session.teamB}}
</h3>

{% if session.match_type=="set" %}
<p>Set {{session.current_set}} | Sets {{session.setA}} - {{session.setB}}</p>
{% endif %}

<p>
ğŸ Serving:
<b>
{% if session.serve=="A" %}
{{session.teamA}}
{% else %}
{{session.teamB}}
{% endif %}
</b>
</p>

<a href="/undo" class="btn btn-outline-warning btn-sm">â†© Undo</a>

</div>


{% if winner %}

<!-- WINNER DISPLAY -->

<div class="win-box">

<h2>ğŸ† Winner</h2>
<h3>{{winner}}</h3>

<div class="mt-3">

<a href="/history" class="btn btn-primary">ğŸ“Š History</a>
<a href="/leaderboard" class="btn btn-warning">ğŸ… Leaderboard</a>
<a href="/reset" class="btn btn-danger">ğŸ” New Match</a>

</div>

</div>


{% else %}

<!-- TEAM A PANEL -->

<div class="card team-card teamA mb-3">

<h5 class="text-center">{{session.teamA}}</h5>

<form method="POST">

<select name="player" class="form-select mb-2">
{% for p in session.teamA_players %}
<option value="{{p}}">{{p}}</option>
{% endfor %}
</select>

<input type="hidden" name="team" value="A">

<div class="d-grid gap-2">

<button class="btn btn-success action-btn" name="action" value="point">â• Point</button>

<div class="row g-1">

<div class="col-6">
<button class="btn btn-info action-btn w-100" name="action" value="ace">ğŸ”¥ Ace</button>
</div>

<div class="col-6">
<button class="btn btn-warning action-btn w-100" name="action" value="attack">ğŸ’¥ Attack</button>
</div>

<div class="col-6">
<button class="btn btn-secondary action-btn w-100" name="action" value="block">ğŸ§± Block</button>
</div>

<div class="col-6">
<button class="btn btn-dark action-btn w-100" name="action" value="dig">ğŸ¤¾ Dig</button>
</div>

</div>

<button class="btn btn-danger action-btn" name="action" value="error">âŒ Error</button>

</div>

</form>

</div>


<!-- TEAM B PANEL -->

<div class="card team-card teamB">

<h5 class="text-center">{{session.teamB}}</h5>

<form method="POST">

<select name="player" class="form-select mb-2">
{% for p in session.teamB_players %}
<option value="{{p}}">{{p}}</option>
{% endfor %}
</select>

<input type="hidden" name="team" value="B">

<div class="d-grid gap-2">

<button class="btn btn-success action-btn" name="action" value="point">â• Point</button>

<div class="row g-1">

<div class="col-6">
<button class="btn btn-info action-btn w-100" name="action" value="ace">ğŸ”¥ Ace</button>
</div>

<div class="col-6">
<button class="btn btn-warning action-btn w-100" name="action" value="attack">ğŸ’¥ Attack</button>
</div>

<div class="col-6">
<button class="btn btn-secondary action-btn w-100" name="action" value="block">ğŸ§± Block</button>
</div>

<div class="col-6">
<button class="btn btn-dark action-btn w-100" name="action" value="dig">ğŸ¤¾ Dig</button>
</div>

</div>

<button class="btn btn-danger action-btn" name="action" value="error">âŒ Error</button>

</div>

</form>

</div>

{% endif %}

</div>


<!-- BOTTOM NAVIGATION -->

<div class="bottom-nav">

<a href="/">
<i class="bi bi-house"></i><br>Home
</a>

<a href="/history">
<i class="bi bi-clock-history"></i><br>History
</a>

<a href="/leaderboard">
<i class="bi bi-trophy"></i><br>Rank
</a>

<a href="/live">
<i class="bi bi-broadcast"></i><br>Live
</a>

</div>

</body>
</html>
